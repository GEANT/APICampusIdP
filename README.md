# APICampusIdP
API for the CampusIdP


Schema:
```javascript
{
    "@context": {
        "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
        "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
        "xsd": "http://www.w3.org/2001/XMLSchema#"
    },
    "@graph": [
        {
            "@id": "http://geant.org/schema/campusidp/autoGenerated",
            "@type": "rdfs:Class",
            "rdfs:comment": "If any property points to a node of this class then api server is signaled to generate value for the property.",
            "rdfs:label": "autoGenerated"
        },
        {
            "@id": "http://geant.org/schema/campusidp/ServiceDescription",
            "@type": "rdfs:Class",
            "rdfs:comment": "The main node Service configuration.",
            "rdfs:label": "ServiceDescription"
        },
        {
            "@id": "http://geant.org/schema/campusidp/WebServer",
            "@type": "rdfs:Class",
            "rdfs:comment": "WebServer frontend configuration.",
            "rdfs:label": "WebServer"
        },
        {
            "@id": "http://geant.org/schema/campusidp/IdPConf",
            "@type": "rdfs:Class",
            "rdfs:comment": "Identity Provider configuration.",
            "rdfs:label": "Identity Provider configuration"
        },
        {
            "@id": "http://geant.org/schema/campusidp/AttributeDefinition",
            "@type": "rdfs:Class",
            "rdfs:comment": "Definition of an attribute ex. attribute-resolver.",
            "rdfs:label": "Definition of an attribute"
        },
        {
            "@id": "http://geant.org/schema/campusidp/DataSource",
            "@type": "rdfs:Class",
            "rdfs:comment": "Definition of data source (Ldap, Database etc)",
            "rdfs:label": "Definition of data source"
        },
        {
            "@id": "http://geant.org/schema/campusidp/MetadataProvider",
            "@type": "rdfs:Class",
            "rdfs:comment": "MetadataProvider definition",
            "rdfs:label": "MetadataProvider definition"
        },
        {
            "@id": "http://geant.org/schema/campusidp/X509Certificate",
            "@type": "rdfs:Class",
            "rdfs:comment": "X509Certificate",
            "rdfs:label": "X509Certificate"
        },
        {
            "@id": "http://geant.org/schema/campusidp/hostname",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/WebServer"
                }
            ],
            "rdfs:comment": "Hostname.",
            "rdfs:label": "hostname"
        },
        {
            "@id": "http://geant.org/schema/campusidp/http",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/WebServer"
                }
            ],
            "rdfs:comment": "http",
            "rdfs:label": "http"
        },
        {
            "@id": "http://geant.org/schema/campusidp/attrID",
            "@type": "rdf:Property",
            "rdfs:comment": "attrID",
            "rdfs:label": "attrID"
        },
        {
            "@id": "http://geant.org/schema/campusidp/attrType",
            "@type": "rdf:Property",
            "rdfs:comment": "attrType",
            "rdfs:label": "attrType"
        },
        {
            "@id": "http://geant.org/schema/campusidp/https",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/WebServer"
                }
            ],
            "rdfs:comment": "https",
            "rdfs:label": "https"
        },
        {
            "@id": "http://geant.org/schema/campusidp/port",
            "@type": "rdf:Property",
            "rdfs:comment": "http(s) port",
            "rdfs:label": "http(s) port"
        },
        {
            "@id": "http://geant.org/schema/campusidp/privateKey",
            "@type": "rdf:Property",
            "rdfs:comment": "private Key",
            "rdfs:label": "private Key"
        },
        {
            "@id": "http://geant.org/schema/campusidp/privateKeyPassword",
            "@type": "rdf:Property",
            "rdfs:comment": "private Key Password",
            "rdfs:label": "private Key Password"
        },
        {
            "@id": "http://geant.org/schema/campusidp/publicKey",
            "@type": "rdf:Property",
            "rdfs:comment": "public Certificate",
            "rdfs:label": "public Certificate"
        },
        {
            "@id": "http://geant.org/schema/campusidp/software",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/IdPConf"
                },
                {
                    "@id": "http://geant.org/schema/campusidp/WebServer"
                },
                {
                    "@id": "http://geant.org/schema/campusidp/MetadataProvider"
                }
            ],
            "rdfs:comment": "information about software used by component",
            "rdfs:label": "information about software used by component"
        },
        {
            "@id": "http://geant.org/schema/campusidp/name",
            "@type": "rdf:Property",
            "rdfs:comment": "Name property. Can be used by any node",
            "rdfs:label": "name"
        },
        {
            "@id": "http://geant.org/schema/campusidp/version",
            "@type": "rdf:Property",
            "rdfs:comment": "version",
            "rdfs:label": "version"
        },
        {
            "@id": "http://geant.org/schema/campusidp/entityID",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/IdPConf"
                }
            ],
            "rdfs:comment": "entityID of Identity/Service Provider",
            "rdfs:label": "entityID of Identity/Service Provider"
        },
        {
            "@id": "http://geant.org/schema/campusidp/metadataProviders",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/IdPConf"
                }
            ],
            "rdfs:comment": "collection of metadataProviders",
            "rdfs:label": "collection of metadataProviders"
        },
        {
            "@id": "http://geant.org/schema/campusidp/idpsso",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/IdPConf"
                }
            ],
            "rdfs:comment": "idpsso",
            "rdfs:label": "idpsso"
        },
        {
            "@id": "http://geant.org/schema/campusidp/aa",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/IdPConf"
                }
            ],
            "rdfs:comment": "aa",
            "rdfs:label": "aa"
        },
        {
            "@id": "http://geant.org/schema/campusidp/url",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/MetadataProvider"
                }
            ],
            "rdfs:comment": "URL ",
            "rdfs:label": "URL"
        },
        {
            "@id": "http://geant.org/schema/campusidp/ref",
            "@type": "rdf:Property",
            "rdfs:comment": "reference to other node",
            "rdfs:label": "ref"
        },
        {
            "@id": "http://geant.org/schema/campusidp/dependency",
            "@type": "rdf:Property",
            "rdfs:comment": "dependecy on other node(s)",
            "rdfs:label": "dependency"
        },
        {
            "@id": "http://geant.org/schema/campusidp/certificates",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/sso"
                },
                {
                    "@id": "http://geant.org/schema/campusidp/aa"
                }
            ],
            "rdfs:comment": "certificate collection",
            "rdfs:label": "certificates"
        },
        {
            "@id": "http://geant.org/schema/campusidp/use",
            "@type": "rdf:Property",
            "rdfs:comment": "use",
            "rdfs:label": "use"
        },
        {
            "@id": "http://geant.org/schema/campusidp/components",
            "@type": "rdf:Property",
            "rdfs:comment": "components : usually collection of config elements",
            "rdfs:label": "components"
        },
        {
            "@id": "http://geant.org/schema/campusidp/definitions",
            "@type": "rdf:Property",
            "rdfs:comment": "collection (array) of nodes",
            "rdfs:label": "definitions"
        },
        {
            "@id": "http://geant.org/schema/campusidp/baseDN",
            "@type": "rdf:Property",
            "rdfs:comment": "base DN LDAP",
            "rdfs:label": "baseDN"
        },
        {
            "@id": "http://geant.org/schema/campusidp/authnUser",
            "@type": "rdf:Property",
            "rdfs:comment": "username used for authentication to resources",
            "rdfs:label": "authnUser"
        },
        {
            "@id": "http://geant.org/schema/campusidp/password",
            "@type": "rdf:Property",
            "rdfs:comment": "password used for authentication to resources",
            "rdfs:label": "password"
        },
        {
            "@id": "http://geant.org/schema/campusidp/attributes",
            "@type": "rdf:Property",
            "rdfs:comment": "attributes : collection of attributes",
            "rdfs:label": "attributes"
        },
        {
            "@id": "http://geant.org/schema/campusidp/sourceAttrIbuteId",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/AttributeDefinition"
                }
            ],
            "rdfs:comment": "sourceAttrIbuteId: ",
            "rdfs:label": "sourceAttrIbuteId"
        },
        {
            "@id": "http://geant.org/schema/campusidp/exposed",
            "@type": "rdf:Property",
            "http://schema.org/domainIncludes": [
                {
                    "@id": "http://geant.org/schema/campusidp/AttributeDefinition"
                }
            ],
            "rdfs:comment": "exposed: defined wether attribute may be released",
            "rdfs:label": "exposed"
        },
        {
            "@id": "http://geant.org/schema/campusidp/type",
            "@type": "rdf:Property",
            "rdfs:comment": "type",
            "rdfs:label": "type"
        }
    ]
}
```




Sample request:
```javascript
{
  "@context": {
    "@vocab": "http://geant.org/campusidp/",
    "dependency": {
      "@type": "@id"
    }
  },
  "@type": "ServiceConfiguration",
  "components": {
    "@type": "Collection",
    "webServer": {
      "@type": "WebServer",
      "software": {},
      "hostname": "idp.example.com",
      "http": {
        "port": 80
      },
      "https": {
        "port": 443,
        "publicKey": {
          "@type": "X509Certificate",
          "@value": "xxxxxxx"
        },
        "privateKey": {
          "@type": "autoGenerated"
        }
      }
    },
    "idp": {
      "@type": "IdPConf",
      "entityID": "https://idp.example.com/idp",
      "software": {
        "name": "shibboleth-idp",
        "version": "3.1.3"
      },
      "metadataProviders": [
        {
          "@type": "MetadataProvider",
          "attrID": "edugate",
          "url": "https://edugate.heanet.ie/example-signed-meta.xml",
          "publicKey": {
            "@type": "X509Certificate",
            "@value": "XYZ"
          }
        }
      ],
      "sso": {
        "cerfificates": []
      },
      "aa": {
        "certificates": []
      },
      "attributes": [
        {
          "@id": "email",
          "@type": "AttributeDefinition",
          "type" : "Simple",
          "attrID": "email",
          "dependency": "myLdap"
        }
      ],
      "components": [
        {
          "@id": "myLdap",
          "@type": "DataSource",
          "confType": "LDAPDirectory",
          "url": "ldap://localhost:389",
          "baseDN": "DC=example,DC=com",
          "authnUser": "cn=connector,dc=example,dc=com",
          "password": "123"
        }
      ]
    }
  }
}
```
